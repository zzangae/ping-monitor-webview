# 5. USER_GUIDE.md

[메인으로 돌아가기](../README.md)

## 문서

- [시스템 아키텍처](ARCHITECTURE.md)
- [파일 구조 및 배포](FILE_STRUCTURE.md)
- [설치 및 빌드 가이드](INSTALLATION.md)
- [사용자 가이드](USER_GUIDE.md)
- [설정 파일 상세](CONFIGURATION.md)
- [문제 해결](TROUBLESHOOTING.md)
- [버전 변경 이력](CHANGELOG.md)

---

## 📋 포함 내용

- 프로그램 시작/종료
- 트레이 아이콘 사용
- 웹 대시보드 기능
- IP 카드 조작
- 알림 설정
- 필터링 사용
- 커스텀 알림 창

---

## 🚀 프로그램 시작

### 첫 실행

```cmd
ping_monitor.exe
```

**자동 동작:**
1. HTTP 서버 시작 (포트 8080-8099 자동 탐색)
2. 시스템 트레이 아이콘 생성 🟢
3. 기본 브라우저로 대시보드 자동 오픈
4. 백그라운드에서 ICMP 핑 모니터링 시작

### 시작 메시지 (디버그 모드)

```
HTTP 서버 시작 성공: http://localhost:8080
설정 로드 완료: 총 5개 타겟
Browser launched successfully
알림: 활성화
커스텀 알림 시스템 초기화 완료
```

---

## 🎛️ 시스템 트레이 메뉴

### 트레이 아이콘

| 상태 | 아이콘 | 설명  |
| :---: | :---: | --- |
| 실행 중  | 🟢     | 모니터링 활성    |
| 일시정지 | 🟡     | 모니터링 일시정지|
| 오류     | 🔴     | 서버 시작 실패   |

### 우클릭 메뉴

```
🟢 Ping Monitor v2.6
├─ ▶ 시작 / ⏸ 일시정지
├─ 🌐 웹 대시보드 열기
├─ 🔔 알림 활성화 ☑
├─ 🔄 설정 다시 불러오기
├─ 🔧 서버 포트 변경
└─ ❌ 종료
```

### 기능 설명

| 메뉴                   | 단축키      | 기능                              |
| ---------------------- | :---: | --------------------------------- |
| 시작/일시정지          | -           | 모니터링 on/off (데이터는 보존)   |
| 웹 대시보드 열기       | 더블클릭    | 기본 브라우저로 대시보드 오픈     |
| 알림 활성화            | -           | 커스텀 알림 창 on/off             |
| 설정 다시 불러오기     | -           | INI 파일 재로드 (재시작 불필요)   |
| 서버 포트 변경         | -           | 8080-8099 포트 변경 다이얼로그    |
| 종료                   | -           | 프로그램 완전 종료                |

---

## 🌐 웹 대시보드

### 접속

```
URL: http://localhost:8080/web/graph.html
```

### 탭 구조

```
📊 대시보드 | 🔔 알림 기록 | 🔥 장애 현황
```

---

## 📊 대시보드 탭

### 통합 컨트롤 바

```
┌──────────────────────────────────────────────────────────┐
│ 🕐 현재 시간: 14:30:25  📅 날짜: 2025-02-01              │
│ ⏱️ 모니터링 시간: 01:23:45                               │
│ ⏸️ 일시정지  🔄 새로고침                                 │
│ 전체: 5  🟢 온라인: 4  🔴 오프라인: 1  평균: 35ms         │
└──────────────────────────────────────────────────────────┘
```

**버튼 기능:**

| 버튼       | 기능                                    |
| ---------- | --------------------------------------- |
| ⏸️ 일시정지| 데이터 폴링 중지 (시간 멈춤)            |
| ▶️ 시작    | 데이터 폴링 재개                        |
| 🔄 새로고침| 페이지 완전 새로고침 (F5)               |

### IP 비교 타임라인

```
┌──────────────────────────────────────────────────────────┐
│ IP 비교 타임라인                           ⚙️ 설정  ▲     │
│ ─────────────────────────────────────────────────────────│
│ [차트: 여러 IP의 지연시간을 실시간 라인 그래프로 비교]       │
│                                                          │
└──────────────────────────────────────────────────────────┘
```

**⚙️ 설정 버튼 - 3개 탭:**

#### 📊 차트 설정 탭
```
표시할 IP 선택:
☑ Google DNS (8.8.8.8)
☑ Cloudflare DNS (1.1.1.1)
☐ OpenDNS (208.67.222.222)

[전체 선택] [전체 해제]
```

#### ⏱️ 그룹별 임계값 탭
```
DNS 그룹:
  경고: [100]ms  위험: [200]ms

서버 그룹:
  경고: [150]ms  위험: [300]ms
```

#### 📋 IP 그룹 관리 탭
```
8.8.8.8 - Google DNS
  그룹: [DNS ▼]  우선순위: [P1 ▼]

192.168.0.1 - Gateway
  그룹: [네트워크 ▼]  우선순위: [P1 ▼]
```

**▲ 최소화 버튼:**
- 클릭: 차트만 숨기기 (제목 유지)
- 재클릭: 차트 다시 표시
- 상태는 localStorage에 저장

### IP 카드

```
┌─────────────────────────────────┐
│ 🟢 Google DNS           ⚙️ ▼   │
│ IP: 8.8.8.8                     │
│ 지연: 35 ms                     │
│ 성공률: 98%                     │
│ 연속 실패: 0회                   │
│ ━━━━━━━━━━━━━━━━━━━━━━━         │ (미니 차트)
└─────────────────────────────────┘
```

**상태 표시:**
- 🟢 온라인: 마지막 핑 성공
- 🔴 오프라인: 연속 3회 실패

**⚙️ 설정 버튼:**
```
┌────────────────────────────┐
│ IP 설정                    │
├────────────────────────────│
│ 우선순위: [P1 ▼]            │
│ 그룹: [DNS ▼]              │
│                            │
│ [저장] [취소]               │
└────────────────────────────┘
```

**▼ 최소화 버튼:**
- 클릭: 카드를 작은 아이콘(100x80px)으로 축소
- "최소화된 IP" 영역으로 이동
- 아이콘 클릭: 원래 크기로 복원

### 최소화된 IP 영역

```
┌──────────────────────────────────────────────────────────┐
│ 📦 최소화된 IP                         3개           ▲   │
│ ─────────────────────────────────────────────────────────│
│ [🟢 8.8.8.8]  [🟢 1.1.1.1]  [🔴 192.168.0.100]         │
└──────────────────────────────────────────────────────────┘
```

**기능:**
- 아이콘 클릭: 원래 크기로 복원
- ▲ 버튼: 아이콘들만 숨기기 (제목 유지)

---

## 🔔 알림 기록 탭

### 통계

```
┌──────────────────────────────────────────────────────────┐
│ 전체: 125       타임아웃: 58 🔴      복구: 67 🟢         │
└──────────────────────────────────────────────────────────┘
```

### 필터

```
타입: [전체 ▼]  [타임아웃]  [복구]
날짜: [전체 ▼]  [오늘]  [어제]  [최근 7일]  [최근 30일]
```

### 테이블

```
┌──────────┬──────────┬──────────────┬──────────────┬────────────┐
│ 시간     │    타입   │    IP 이름   │    IP 주소   │    날짜     │
├──────────┼──────────┼──────────────┼──────────────┼────────────┤
│ 14:30:25 │ timeout  │ Google DNS   │ 8.8.8.8      │ 2024-02-01 │
│ 14:35:10 │ recovery │ Google DNS   │ 8.8.8.8      │ 2024-02-01 │
└──────────┴──────────┴──────────────┴──────────────┴────────────┘
```

**정렬:**
- 클릭: 컬럼 헤더 클릭으로 정렬
- 기본: 시간 역순 (최신 → 과거)

---

## 🔥 장애 현황 탭

### 통계

```
┌──────────────────────────────────────────────────────────┐
│ 전체: 15  진행중: 2 🔴  복구완료: 13 🟢  평균: 8분 30초   │
└──────────────────────────────────────────────────────────┘
```

### 필터

```
상태: [전체 ▼]  [진행중]  [복구완료]
날짜: [전체 ▼]  [오늘]  [어제]  [최근 7일]  [최근 30일]
```

### 테이블

```
┌──────────────────┬──────────────┬──────────────┬────────┬──────────┬──────────────────┐
│ 시작 시간         │   IP 이름    │    IP 주소   │   상태  │ 지속 시간 │    종료 시간     │
├──────────────────┼──────────────┼──────────────┼────────┼──────────┼──────────────────┤
│ 2024-02-01 14:30 │  Google DNS  │ 8.8.8.8      │복구완료 │ 4분 45초 │ 2024-02-01 14:35 │
│ 2024-02-01 15:10 │  Gateway     │ 192.168.0.1  │진행중   │ 12분 20초│        -         │
└──────────────────┴──────────────┴──────────────┴────────┴──────────┴──────────────────┘
```

**장애 판정 기준:**
- 연속 5분 이상 다운 시 장애로 기록
- 복구 시 자동으로 종료 시간 기록

---

## 🔔 커스텀 알림 창

### 특징

- **디자인**: Outlook 스타일
- **위치**: 화면 우하단 (트레이 아이콘 가리지 않음)
- **크기**: 350 x 100 픽셀
- **색상**: 다크 테마 (RGB 45, 45, 48)
- **투명도**: 98%
- **자동 닫힘**: 5초 후
- **수동 닫기**: 클릭 시 즉시
- **최대 개수**: 5개 동시 표시

### 알림 유형

```
⚠️ 네트워크 타임아웃
━━━━━━━━━━━━━━━━━━━
Google DNS (8.8.8.8)이(가) 응답하지 않습니다.
연속 3회 실패
```

```
✅ 네트워크 복구
━━━━━━━━━━━━━━━━━━━
Google DNS (8.8.8.8)이(가) 다시 온라인 상태입니다.
```

### 알림 조건

| 이벤트      | 조건                         | 색상  |
| ----------- | ---------------------------- | ----- |
| 타임아웃    | 연속 3회 실패                | 주황색|
| 복구        | 오프라인 → 온라인 전환       | 초록색|

### 알림 제어

**트레이 메뉴:**
```
🔔 알림 활성화 ☑  ← 클릭으로 on/off
```

**비활성화 시:**
- 현재 표시된 모든 알림 창 즉시 닫힘
- 새 알림 창 표시 안 됨

---

## ⚙️ 설정 관리

### IP 추가/수정

```cmd
# 1. 설정 파일 편집
notepad config\ping_config.ini

# 2. IP 추가
[Targets]
8.8.8.8,Google DNS
1.1.1.1,Cloudflare DNS
192.168.0.1,Gateway  ← 새로 추가

# 3. 설정 다시 불러오기
트레이 아이콘 우클릭 → "설정 다시 불러오기"

# 4. 브라우저 새로고침 (F5)
```

**주의:** 프로그램 재시작 불필요!

### 포트 변경

```
1. 트레이 아이콘 우클릭 → "서버 포트 변경"
2. 새 포트 입력 (8080-8099)
3. [확인]
4. 서버 자동 재시작
5. 브라우저 자동 오픈 (새 포트)
```

### 데이터 초기화

```cmd
# 알림/장애 로그만 초기화
del data\notification_log.json
del data\outage_log.json

# data 폴더 전체 삭제 (다음 실행 시 자동 재생성)
rmdir /S /Q data
```

---

## 💡 사용 팁

### 효율적인 모니터링

1. **중요 IP는 우선순위 P1**
   - 설정 UI에서 우선순위 높게 설정
   - 대시보드에서 상단에 배치

2. **그룹별 임계값 조정**
   - 서버: 짧게 (50ms 경고, 100ms 위험)
   - 일반: 길게 (150ms 경고, 300ms 위험)

3. **최소화 기능 활용**
   - 모니터링 중인 IP만 표시
   - 나머지는 최소화하여 화면 절약

### 장애 분석

1. **장애 현황 탭 활용**
   - 장기 다운타임 분석
   - 재발 패턴 파악

2. **outage_log.json 분석**
   - Excel, Python으로 데이터 분석
   - 월별/주별 통계 생성

### 알림 최적화

```ini
# ping_config.ini
[Settings]
NotificationCooldown=300       # 같은 IP 5분 내 재알림 방지
ConsecutiveFailures=3          # 연속 3회 실패 시 알림
NotifyOnTimeout=1              # 타임아웃 알림 on
NotifyOnRecovery=1             # 복구 알림 on
```

---

## 🎯 실전 시나리오

### 시나리오 1: 일일 모니터링

```
1. 아침에 출근 → ping_monitor.exe 실행
2. 대시보드 확인 (모든 IP 온라인인지)
3. 트레이 아이콘으로 최소화
4. 알림 활성화 (타임아웃 시 즉시 확인)
5. 퇴근 시 종료
```

### 시나리오 2: 서버 점검

```
1. 장애 현황 탭 확인
2. 최근 7일 필터 적용
3. 진행중 장애 확인
4. 복구 완료 장애의 지속 시간 분석
5. 월간 보고서 작성
```

### 시나리오 3: 새 서버 추가

```
1. ping_config.ini 편집
2. 새 서버 IP 추가
3. 그룹: "서버", 우선순위: P1
4. 트레이 → "설정 다시 불러오기"
5. 브라우저 F5
6. 차트 설정에서 표시 켜기
```

---

## 🔧 고급 기능

### LocalStorage 활용

브라우저는 다음 정보를 자동 저장:

```javascript
- timelineCollapsed       // IP 비교 타임라인 최소화 상태
- minimizedAreaCollapsed  // 최소화된 IP 영역 상태
- visibleIPs             // 표시 중인 IP 목록
- ipGroups               // IP 그룹 설정
- groupThresholds        // 그룹별 임계값
- minimizedCards         // 최소화된 카드 목록
```

**초기화 방법:**

```javascript
// 브라우저 개발자 도구 (F12) → Console
localStorage.clear();
location.reload();
```

---

**작성일:** 2025-02-01  
**버전:** Ping Monitor v2.6
